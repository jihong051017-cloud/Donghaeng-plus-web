<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Leaflet 팝업 내 버튼으<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>디자인 템플릿</title>

  <!-- Leaflet CSS & JS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>


  <style>

    /* 지도 전체 크기 */
    #map {
      height: 100vh;
      width: 100%;
    }

/* 두 번째 팝업 전체 컨테이너 */
.leaflet-popup-content .popup-container {
  max-height: 500px;      /* 팝업 최대 높이 설정 */
  overflow-y: auto;       /* 내용이 많으면 스크롤 */
  width: 350px;           /* 원하는 가로 크기 조정 */
  padding: 5px 40px 5px 5px;
  box-sizing: border-box;
}

/* 카드 간 간격 조정 */
.popup-card {
  margin-bottom: 10px;
}

.popup-wrapper {
  max-width: 500px;
}

/* 제목 */
.popup-title {
  font-size: 24px;
  font-weight: bold;
  line-height: 2;
  color: #222;
}

/* 설명 */
.popup-desc {
  font-size: 14px;
  color: #555;
  line-height: 1.4;
}

/* 링크 */
.popup-link {
  color: #0066ff;
  text-decoration: underline;
  font-size: 13px;
  line-height: 2;
}

/* 이미지 스타일 */
.popup-img {
  width: 20%;          /* width=200 같은 고정값 대신 반응형 */
  max-width: 220px;     /* 팝업 안에서 넘치지 않도록 */
  margin-top: 5px;
  margin-bottom: 10px;
  border-radius: 8px;
  display: block;
}

    .popup-card {
      margin-bottom: 10px;
      border: 1px solid #ddd;
      border-radius: 18px;
      overflow: hidden;
      box-shadow: 0 1px 4px rgba(0,0,0,0.1);
    }
    .popup-card img {
      width: 15%;
      height: auto;
      display: block;
      margin-top: 25px;
      margin-left: 25px;
      border-radius: 6px;
    }
    .popup-card-content {
      padding: 10px 20px;
    }
    .popup-card-content h4 {
      margin: 8px 0;
      font-size: 24px;
      color: #333;
    }
    .popup-card-content p {
      font-size: 16px;
      color: #666;
      margin: 10;
    }



    .popup-btn {
  margin-top: 10px;
  padding: 6px 12px;
  border: none;
  background-color: #7d48ff;
  color: white;
  border-radius: 6px;
  cursor: pointer;
  font-size: 13px;
}

.popup-btn:hover {
  background-color: #5a2ed0;
}


    /* 투명한 마커용 클래스 */
    .transparent-marker {
      opacity: 0.01;
    }


  </style>
</head>
<body>
  <div id="map"></div>

  <script>
    /* ---------------------------
       지도 기본 설정
    ----------------------------- */
    const map = L.map("map").setView([37.2455, 127.0809], 15.5);


    /* 지도 타일 (OpenStreetMap) */
    L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
      maxZoom: 19,
      attribution: "© OpenStreetMap contributors",
    }).addTo(map);

    /* ---------------------------
       Polyline 경로 정의 (여기에 건물별 길 좌표 찍으면 될 듯)
    ----------------------------- */

    // 공대 길
    const engineeringRoad = L.polyline([
      [37.24744928621014,127.07841734170458],
      [37.247023514977876,127.07845916693653],
      [37.24547140872474,127.0785449066531],
      [37.24552004230549,127.07992563271284],
      [37.24588492710917,127.07998237243892],
      [37.24607825426014,127.08056866377224],
      [37.24635306884318,127.08057459181238],
      [37.24659640053806,127.0805015895062],
      [37.24675446500199,127.07993820740015],
      [37.24703832805987,127.07988778753116],
      [37.247060892163375,127.07983145609785],
      [37.24702126050105,127.07846198236037]
    ], { color: "red", weight: 5, opacity: 0.8 });


    // 체대 길
    const peRoad = L.polyline([
      [37.247248789953005,127.07843826722025],
      [37.24546916078659,127.07853786006163],
      [37.24532498998307,127.078543345847],
      [37.24521686094346,127.07854886901869],
      [37.24489247007228,127.07857107380067],
      [37.24480233198483,127.07862169843803],
      [37.24473470874797,127.07868925241509],
      [37.244594851797466,127.07898214477257],
      [37.2446332006517,127.07890047229672],
      [37.24451145067267,127.07906377010181],
      [37.244401038873015,127.0791143727058],
      [37.243840074727544,127.07920958618395],
      [37.2438307675567,127.07965194629782],
      [37.24386897469027,127.07978159812166],
      [37.2439522738143,127.07985212710062],
      [37.24462135618004,127.07976830286894],
      [37.244718288618486,127.0796641510417],
      [37.24469586477552,127.0795119730109],
      [37.244509201824386,127.07905813241727]
    ], { color: "red", weight: 5, opacity: 0.8 });


    // 도서관 길 (형광색)
    const libraryRoad = L.polyline([
      [37.247248789953005,127.07843826722025],
      [37.24546916078659,127.07853786006163],
      [37.24532498998307,127.078543345847],
      [37.24521686094346,127.07854886901869],
      [37.24489247007228,127.07857107380067],
      [37.24480233198483,127.07862169843803],
      [37.24473470874797,127.07868925241509],
      [37.244594851797466,127.07898214477257],
      [37.24452272313177,127.07904969353683],
      [37.24440103699051,127.07911719036744],
      [37.243842321684056,127.07921804146395],
      [37.243729672282555,127.07924609994475],
      [37.24364852923831,127.07931927351159],
      [37.2436168641912,127.07951083946755],
      [37.24360776664984,127.07964044107803],
      [37.24362972508455,127.08048011938003],
      [37.24357106904101,127.0806096681135],
      [37.2435124589425,127.08067159356287],
      [37.24253033581597,127.0806480060374],
      [37.24250704067593,127.08176938325934],
      [37.24245740145371,127.08188766846422],
      [37.24238077368678,127.08194393732957],
      [37.24140299190663,127.08215701273852],
      [37.24137594492579,127.08217952378943],
      [37.2414454827908,127.0793056946494],
      [37.241323962372604,127.07912524418893],
      [37.2406031679128,127.07906250523807],
      [37.240427370021166,127.07920319740585],
      [37.24031913144617,127.07937213485233],
      [37.24028749658483,127.07951861222654],
      [37.24025553072756,127.08015533574597],
      [37.240318531353864,127.08026246789974],
      [37.24027220025517,127.08212761031747],
      [37.241398482773555,127.08216264294789]
    ], { color: "#7CFF59", weight: 6, opacity: 0.8 });


	const itnRoad = L.polyline([
		[37.247248789953005,127.07843826722025],//
		[37.24546916078659,127.07853786006163],
		[37.24532498998307,127.078543345847],
		[37.24521686094346,127.07854886901869],
		[37.24489247007228,127.07857107380067],
		[37.24480233198483,127.07862169843803],
		[37.24473470874797,127.07868925241509],
		[37.244594851797466,127.07898214477257],
		[37.24473470874797,127.07868925241509],
		[37.2446332006517,127.07890047229672],
		[37.24451145067267,127.07906377010181],
		[37.244401038873015,127.0791143727058],
		[37.24373193432062,127.07923201411963],//차단기앞
		[37.243637264295806,127.0793220793412],
		[37.243587445755644,127.07971086052873],
		[37.243650000498164,127.08047732330382],	
		[37.243595857351075,127.0805956063459],	
		[37.24350570302894,127.0806687687318],
		[37.24315880476225,127.08066276377059],//선승관과 생대 사이
		[37.24251907084014,127.08065081162808],
		[37.242489010056616,127.08178345174251],	
		[37.2424483851629,127.08189611148231],
		[37.24234923322802,127.08194953835766],
		[37.241371447522894,127.0821682487035],//도서관차단기앞
		[37.24026543655641,127.08213605550793],
		[37.239907409788835,127.0819356247891],
		[37.23964615352127,127.08186772232624],
		[37.23956738410809,127.08176339024223],
		[37.23954499787091,127.0815605073001]
    	], { color: "red", weight: 5, opacity:0.8});

    const designRoad = L.polyline([
	[37.247248789953005,127.07843826722025],//예디대
	[37.24546916078659,127.07853786006163],
	[37.24532498998307,127.078543345847],
	[37.24521686094346,127.07854886901869],
	[37.24489247007228,127.07857107380067],
	[37.24480233198483,127.07862169843803],
	[37.24473470874797,127.07868925241509],
	[37.244594851797466,127.07898214477257],
	[37.24452272313177,127.07904969353683],
	[37.24440103699051,127.07911719036744],
	[37.243842321684056,127.07921804146395],
	[37.243729672282555,127.07924609994475],
	[37.24364852923831,127.07931927351159],
	[37.2436168641912,127.07951083946755],
	[37.24360776664984,127.07964044107803],
	[37.24362972508455,127.08048011938003],
	[37.24357106904101,127.0806096681135],
	[37.2435124589425,127.08067159356287],
	[37.24253033581597,127.0806480060374],
	[37.24250704067593,127.08176938325934],
	[37.24245740145371,127.08188766846422],
	[37.24238077368678,127.08194393732957],
	[37.24140299190663,127.08215701273852],
	[37.24137594492579,127.08217952378943],
	[37.24132475356484,127.08450112860575]
    ], { color: "#7CFF59", weight: 6, opacity: 0.8 });


    	const sciRoad = L.polyline([
		[37.247248789953005,127.07843826722025],//응과대
		[37.24546916078659,127.07853786006163],
		[37.24532498998307,127.078543345847],
		[37.24521686094346,127.07854886901869],
		[37.24489247007228,127.07857107380067],
		[37.24480233198483,127.07862169843803],
		[37.24473470874797,127.07868925241509],
		[37.244594851797466,127.07898214477257],
		[37.24473470874797,127.07868925241509],
		[37.2446332006517,127.07890047229672],
		[37.24451145067267,127.07906377010181],
		[37.244401038873015,127.0791143727058],
		[37.24373193432062,127.07923201411963],//차단기앞
		[37.243637264295806,127.0793220793412],
		[37.243587445755644,127.07971086052873],
		[37.243650000498164,127.08047732330382],	
		[37.243595857351075,127.0805956063459],	
		[37.24350570302894,127.0806687687318],
		[37.24315880476225,127.08066276377059],//선승관과 생대 사이
		[37.24251907084014,127.08065081162808],
		[37.242489010056616,127.08178345174251],	
		[37.2424483851629,127.08189611148231],
		[37.24234923322802,127.08194953835766],
		[37.241371447522894,127.0821682487035],//도서관차단기앞
		[37.240272190484376,127.08214169785619],
		[37.240049168194695,127.08216117835605],
		[37.23999615522324,127.08387697805732],
		[37.23999386667942,127.08392769051197],
		[37.23998483426183,127.08395867298795],
		[37.23943069763574,127.08394960594518]
	], { color: "red", weight: 5, opacity:0.8});

	const langRoad = L.polyline([
		[37.247248789953005,127.07843826722025],//외대
		[37.24546916078659,127.07853786006163],
		[37.24532498998307,127.078543345847],
		[37.24521686094346,127.07854886901869],
		[37.24489247007228,127.07857107380067],
		[37.24480233198483,127.07862169843803]
	], {color :"red",weight:5,opacity:0.8});
		


    	const bioRoad = L.polyline([
		[37.247248789953005,127.07843826722025],//응과대
		[37.24546916078659,127.07853786006163],
		[37.24532498998307,127.078543345847],
		[37.24521686094346,127.07854886901869],
		[37.24489247007228,127.07857107380067],
		[37.24480233198483,127.07862169843803],
		[37.24473470874797,127.07868925241509],
		[37.244594851797466,127.07898214477257],
		[37.24473470874797,127.07868925241509],
		[37.2446332006517,127.07890047229672],
		[37.24451145067267,127.07906377010181],
		[37.244401038873015,127.0791143727058],
		[37.24373193432062,127.07923201411963],//차단기앞
		[37.243637264295806,127.0793220793412],
		[37.243587445755644,127.07971086052873],
		[37.243650000498164,127.08047732330382],	
		[37.243595857351075,127.0805956063459],	
		[37.24350570302894,127.0806687687318],
		[37.24315880476225,127.08066276377059]//선승관과 생대 사이

	],{ color : "red", weight :5, opacity:0.8});


    	const pe2Road = L.polyline([
		[37.247248789953005,127.07843826722025],//선승관
		[37.24546916078659,127.07853786006163],
		[37.24532498998307,127.078543345847],
		[37.24521686094346,127.07854886901869],
		[37.24489247007228,127.07857107380067],
		[37.24480233198483,127.07862169843803],
		[37.24473470874797,127.07868925241509],
		[37.244594851797466,127.07898214477257],
		[37.24473470874797,127.07868925241509],
		[37.2446332006517,127.07890047229672],
		[37.24451145067267,127.07906377010181],
		[37.244401038873015,127.0791143727058],
		[37.24373193432062,127.07923201411963],//차단기앞
		[37.243637264295806,127.0793220793412],
		[37.243587445755644,127.07971086052873],
		[37.243650000498164,127.08047732330382],	
		[37.243595857351075,127.0805956063459],	
		[37.24350570302894,127.0806687687318],
		[37.24315880476225,127.08066276377059],//선승관과 생대 사이
		[37.242629456472265,127.08063965885817]

	],{ color : "red", weight :5, opacity:0.8});

	const secondRoad = L.polyline([
		[37.247248789953005,127.07843826722025],//우정원
		[37.246253106508995,127.07848231895426],
		[37.24623113395059,127.07764261209914]
	], {color :"red",weight:5,opacity:0.8});
		

	const girlRoad = L.polyline([
		[37.247248789953005,127.07843826722025],//여긱
		[37.24546916078659,127.07853786006163],
		[37.24532498998307,127.078543345847],
		[37.24521686094346,127.07854886901869],
		[37.24489247007228,127.07857107380067],
		[37.24480233198483,127.07862169843803],
		[37.24473470874797,127.07868925241509],
		[37.244594851797466,127.07898214477257],
		[37.24473470874797,127.07868925241509],
		[37.2446332006517,127.07890047229672],
		[37.24451145067267,127.07906377010181],
		[37.244401038873015,127.0791143727058],
		[37.24373193432062,127.07923201411963],//차단기앞
		[37.243527086039784,127.07902329497676],
		[37.24316460801644,127.07873411072201],
		[37.24300708795637,127.07848881464271],
		[37.24290588639056,127.07823794258788],
		[37.242858765517184,127.07795895086404],
		[37.24281837038959,127.07772786567017],
		[37.242825257519016,127.07753064039386],
		[37.24291322729005,127.0773504035752],
		[37.24297636294574,127.07725466933591],
		[37.24315664165698,127.0771477838866],
		[37.24327380497212,127.07710563898414],
		[37.24343826577099,127.07707481262005],
		[37.243787446169506,127.07703572123229]
	], {color :"red",weight:5,opacity:0.8});
		

	const boyRoad = L.polyline([
		[37.247248789953005,127.07843826722025],//남긱
		[37.24546916078659,127.07853786006163],
		[37.24532498998307,127.078543345847],
		[37.24521686094346,127.07854886901869],
		[37.24489247007228,127.07857107380067],
		[37.24480233198483,127.07862169843803],
		[37.24473470874797,127.07868925241509],
		[37.244594851797466,127.07898214477257],
		[37.24473470874797,127.07868925241509],
		[37.2446332006517,127.07890047229672],
		[37.24451145067267,127.07906377010181],
		[37.244401038873015,127.0791143727058],
		[37.24373193432062,127.07923201411963],//차단기앞
		[37.243527086039784,127.07902329497676],
		[37.24316460801644,127.07873411072201],
		[37.24300708795637,127.07848881464271],
		[37.24290588639056,127.07823794258788],
		[37.242858765517184,127.07795895086404],
		[37.24281837038959,127.07772786567017],
		[37.242825257519016,127.07753064039386],
		[37.24291322729005,127.0773504035752]

	], {color :"red",weight:5,opacity:0.8});
		

    	const stuRoad = L.polyline([
		[37.247248789953005,127.07843826722025],//학생회관
		[37.24546916078659,127.07853786006163],
		[37.24532498998307,127.078543345847],
		[37.24521686094346,127.07854886901869],
		[37.24489247007228,127.07857107380067],
		[37.24480233198483,127.07862169843803],
		[37.24473470874797,127.07868925241509],
		[37.244594851797466,127.07898214477257],
		[37.24473470874797,127.07868925241509],
		[37.2446332006517,127.07890047229672],
		[37.24451145067267,127.07906377010181],
		[37.244401038873015,127.0791143727058],
		[37.24373193432062,127.07923201411963],//차단기앞
		[37.243637264295806,127.0793220793412],
		[37.243587445755644,127.07971086052873],
		[37.243650000498164,127.08047732330382],	
		[37.243595857351075,127.0805956063459],	
		[37.24350570302894,127.0806687687318],
		[37.24315880476225,127.08066276377059],//선승관과 생대 사이
		[37.2425123120465,127.08065221322292 ],
		[37.242502548098045,127.0817510640521],
		[37.242461903753735,127.08189189972224],
		[37.242360496284896,127.08194955055208],
		[37.24136919491116,127.08216824625822],
		[37.241412960777126,127.08076374392579],
		[37.24150544358112,127.08057929269935],
		[37.241582084121305,127.08050330020401],
		[37.24158919515898,127.07998205936597]

	],{ color : "red", weight :5, opacity:0.8});


	const mulRoad = L.polyline([
		[37.247248789953005,127.07843826722025],//멀관
		[37.24546916078659,127.07853786006163],
		[37.24532498998307,127.078543345847],
		[37.24521686094346,127.07854886901869],
		[37.24489247007228,127.07857107380067],
		[37.24480233198483,127.07862169843803],
		[37.24473470874797,127.07868925241509],
		[37.244594851797466,127.07898214477257],
		[37.24473470874797,127.07868925241509],
		[37.2446332006517,127.07890047229672],
		[37.24451145067267,127.07906377010181],
		[37.244401038873015,127.0791143727058],
		[37.24373193432062,127.07923201411963],//차단기앞
		[37.243527086039784,127.07902329497676],
		[37.24316460801644,127.07873411072201],
		[37.24300708795637,127.07848881464271],
		[37.24290588639056,127.07823794258788],
		[37.242858765517184,127.07795895086404],
		[37.24281837038959,127.07772786567017],
		[37.242825257519016,127.07753064039386],
		[37.24291322729005,127.0773504035752],
		[37.24297636294574,127.07725466933591],
		[37.24315664165698,127.0771477838866],
		[37.24327380497212,127.07710563898414],
		[37.24343826577099,127.07707481262005],
		[37.243787446169506,127.07703572123229],
		[37.2441501577709,127.07697269319057]
	], {color :"red",weight:5,opacity:0.8});
		

	const doRoad = L.polyline([
		[37.247248789953005,127.07843826722025],//응과대
		[37.24546916078659,127.07853786006163],
		[37.24532498998307,127.078543345847],
		[37.24521686094346,127.07854886901869],
		[37.24489247007228,127.07857107380067],
		[37.24480233198483,127.07862169843803],
		[37.24473470874797,127.07868925241509],
		[37.244594851797466,127.07898214477257],
		[37.24473470874797,127.07868925241509],
		[37.2446332006517,127.07890047229672],
		[37.24451145067267,127.07906377010181],
		[37.244401038873015,127.0791143727058],
		[37.24373193432062,127.07923201411963],//차단기앞
		[37.243637264295806,127.0793220793412],
		[37.243587445755644,127.07971086052873],
		[37.243650000498164,127.08047732330382],	
		[37.243595857351075,127.0805956063459],	
		[37.24350570302894,127.0806687687318],
		[37.24315880476225,127.08066276377059]//선승관과 생대 사이

	],{ color : "red", weight :5, opacity:0.8});



    /* ---------------------------
       투명한 마커 아이콘 정의
    ----------------------------- */
    const transparentIcon = L.icon({
      iconUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png',
      shadowUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png',
      iconSize: [25, 41],
      iconAnchor: [12, 41],
      popupAnchor: [1, -34],
      className: 'transparent-marker'
    });

    /* ---------------------------
       마커 + 팝업 데이터
    ----------------------------- */
    const locations = [
      {
        name: "공과대학",
        coords: [37.24615691029263, 127.08084065835392],
        desc: "기계공학과, 산업경영공학과, 화학공학과 등 공학계열 전공이 위치한 건물이에요",
        link: "https://eng.khu.ac.kr/",
        img: "https://postfiles.pstatic.net/MjAyNTExMTRfMTkg/MDAxNzYzMDk5NDgwNDQ5.vvZS0_1XzUf4C3ixesDt5TDJUy1oVfHd3aNa4IbygAAg.DrP6I_oftFAt4OrJkJYfczr2hOP06IJuJuv_PRWB0RMg.PNG/gear.png?type=w966",
        road: engineeringRoad,
        facilities: [
          {desc: "• 주 출입구 양쪽으로 경사로가 있어요<br>• 출입구 까지 언덕이 높아 이동이 힘들어요❗"},
          {desc: "• 건물의 모든 출입구가 자동문이에요"},
          {desc: "• 공과대학은 건물 양쪽으로 엘리베이터가 있어요.<br>• 엘리베이터 까지 가는 길의 경사가 급해요❗"},
          {desc: "• 1층에 장애인 화장실이 있어요"},
          {desc: "• 건물에 장애인 전용 주차장이 ()개 있어요"},
          {desc: "• 건물 내부 구조가 복잡해요<br>• 건물 모양에 따라 왼팔, 오른팔 등으로 불러요<br>• 오른팔은 공학실험동과 연결되어 있어요<br>• ⚠️경사가 급해 휠체어 혼자서 이동하기 어려워요"}
        ]
        
      },
      {
        name: "체육대학",
        coords: [37.244368520122684, 127.08057107017227],
        desc: "스포츠 관련 학과들이 위치합니다.",
        img: "https://postfiles.pstatic.net/MjAyNTExMTRfMjc2/MDAxNzYzMTA4NDQ3MTA4.73vHV2vLaaEs6vhpV-HhjpzCzJry4fzO9dAr_gNzGfMg.DGDfgHw1-lsAZGQwlEN3JiXd8z7EvObKePJr5--Lihcg.PNG/ball.png?type=w966",
        road: peRoad,
        facilities: [
          {desc: "• 주 출입구 양쪽으로 경사로가 있어요<br>• 출입구 까지 언덕이 높아 이동이 힘들어요❗"},
          {desc: "• 출입구는 미닫이문과 자동문으로 되어있어요."},
          {desc: "• 건물에 엘리베이터가 없어요."},
          {desc: "• 1층에 장애인 화장실이 있어요."},
          {desc: "• 건물에 장애인 전용 주차장이 ()개 있어요. <br>• 건물 앞에 버스 정류장이 있어요."},
          {desc: "• 중간 계단이 있어 휠체어 이용자가 접근하기 어려워요."}
        ]
        
      },
      {
        name: "중앙도서관",
        coords: [37.24088203083561, 127.07975027446633],
        desc: "학생들이 공부하고 자료를 찾는 공간입니다.",
        img: "https://postfiles.pstatic.net/MjAyNTExMTRfMjk0/MDAxNzYzMTA4NDg4MDg4.-_Op3Yfkk7wOPAVQCYNqJd-Me8xw3l0QFIMZ3P7hVJQg.VLMHZCS8DaWSL25XB5NPGuvFW79dHz-UWhye7oycXzEg.PNG/open-book_(1).png?type=w966",
        road: libraryRoad,
        facilities: [
          {desc: "• 경사로가 어디에있지"},
          {desc: "• 출입구는 여닫이문과 자동문으로 되어있어요."},
          {desc: "• 건물 왼쪽 안에 엘리베이터가 있어요."},
          {desc: "• 건물에 장애인 전용 화장실이 층마다 있어요"},
          {desc: "• 건물에 장애인 전용 주차장이 ()개 있어요. <br> • 건물 앞에 버스 정류장이 있어요."},
          {desc: "세부 정보를 입력하세요 ㅋㅋ"}
        ]
      },

      {
        name: "예술디자인대학",
        coords: [37.24186089520857, 127.08447355145206],
        desc: "예술과 디자인 대학교",
        img: "https://postfiles.pstatic.net/MjAyNTExMTRfMjk0/MDAxNzYzMTA4NDg4MDg4.-_Op3Yfkk7wOPAVQCYNqJd-Me8xw3l0QFIMZ3P7hVJQg.VLMHZCS8DaWSL25XB5NPGuvFW79dHz-UWhye7oycXzEg.PNG/open-book_(1).png?type=w966",
        road: designRoad,
        facilities: [
          {desc: "• 경사로 어디에?"},
          {desc: "• 출입구는 여닫이,미닫이,자동문으로 되어있어요."},
          {desc: "• 건물 중앙?에 엘리베이터가 있어요."},
          {desc: "• 건물에 장애인 전용 화장실이 1,2층에 있어요."},
          {desc: "• 건물에 장애인 전용 주차장이 있어요."},
          {desc: "• 세부 정보를 입력하세요 ㅋㅋ"}
        ]
      },

      {
        name: "국제대학",
        coords: [37.23990782929709, 127.0813270460393],
        desc: "국제학과가 있는..",
        img: "https://postfiles.pstatic.net/MjAyNTExMTRfMjk0/MDAxNzYzMTA4NDg4MDg4.-_Op3Yfkk7wOPAVQCYNqJd-Me8xw3l0QFIMZ3P7hVJQg.VLMHZCS8DaWSL25XB5NPGuvFW79dHz-UWhye7oycXzEg.PNG/open-book_(1).png?type=w966",
        road: itnRoad,
        facilities: [
          {desc: "• 경사로"},
          {desc: "• 출입구는 여닫이문과 자동문으로 되어있어요."},
          {desc: "• 건물에 엘리베이터가 없어요."},
          {desc: "• 건물에 장애인 전용 화장실이 없어요."},
          {desc: "• 전용 주차장"},
          {desc: "• 주요 동선 내 계단이 있어 휠체어 이용자가 접근하기 어려워요."}
        ]
      },

      {
        name: "응용과학/전자정보대학",
        coords: [37.239726154237346, 127.08343433302781],
        desc: "응가대",
        img: "https://postfiles.pstatic.net/MjAyNTExMTRfMjk0/MDAxNzYzMTA4NDg4MDg4.-_Op3Yfkk7wOPAVQCYNqJd-Me8xw3l0QFIMZ3P7hVJQg.VLMHZCS8DaWSL25XB5NPGuvFW79dHz-UWhye7oycXzEg.PNG/open-book_(1).png?type=w966",
        road: sciRoad,
        facilities: [
          {desc: "• 경사로"},
          {desc: "• 출입구는 여닫이문과 자동문으로 되어있어요."},
          {desc: "• 건물에 엘리베이터가 __에 있어요."},
          {desc: "• 건물에 장애인 전용 화장실이 없어요."},
          {desc: "• 건물에 장애인 전용 주차장이 있어요."},
          {desc: "• 주요 동선 내 계단이 있어 휠체어 이용자가 접근하기 어려워요."}
        ]
      },
      {
        name: "외국어대학",
        coords: [37.245208263779745, 127.07792333209701],
        desc: "내부가 이쁘더라",
        img: "https://postfiles.pstatic.net/MjAyNTExMTRfMjk0/MDAxNzYzMTA4NDg4MDg4.-_Op3Yfkk7wOPAVQCYNqJd-Me8xw3l0QFIMZ3P7hVJQg.VLMHZCS8DaWSL25XB5NPGuvFW79dHz-UWhye7oycXzEg.PNG/open-book_(1).png?type=w966",
        road: langRoad,
        facilities: [
          {desc: "• 건물 뒤쪽에 경사로 출입구가 있어요."},
          {desc: "• 출입문은 여닫이문과 자동문으로 되어있어요."},
          {desc: "• 건물에 엘리베이터가 없어요."},
          {desc: "• 건물에 장애인 전용 화장실이 없어요."},
          {desc: "• 건물에 장애인 전용 주차장이 3개 있어요. <br>• 건물 앞에 버스정류장이 있어요."},
          {desc: "• 뒤쪽에 경사로 출입구가 있긴 하지만 그 길까지의 경사가 높아요."}
        ]
      },

      {
        name: "생명과학대학",
        coords: [37.242926524172276, 127.08104571100777],
        desc: "공대보다 못생김",
        img: "https://postfiles.pstatic.net/MjAyNTExMTRfMjk0/MDAxNzYzMTA4NDg4MDg4.-_Op3Yfkk7wOPAVQCYNqJd-Me8xw3l0QFIMZ3P7hVJQg.VLMHZCS8DaWSL25XB5NPGuvFW79dHz-UWhye7oycXzEg.PNG/open-book_(1).png?type=w966",
        road: bioRoad,
        facilities: [
          {desc: "• 경사로"},
          {desc: "• 출입문은 미닫이문으로 되어있어요. <br>• 문 열림 보조 손잡이가 있어요."},
          {desc: "• 건물에 엘리베이터가__에 있어요."},
          {desc: "• 장애인 전용 화장실이__에 있어요."},
          {desc: "• 장애인 전용 주차장이 <br>• 건물 앞에 버스 정류장이 있어요."},
          {desc: "• 주요 동선 내에 계단이 있어 휠체어 이용자가 접근하기 어려워요."}
        ]
      },

      {
        name: "선승관",
        coords: [37.24275594698641, 127.08013262519754],
        desc: "체육관",
        img: "https://postfiles.pstatic.net/MjAyNTExMTRfMjk0/MDAxNzYzMTA4NDg4MDg4.-_Op3Yfkk7wOPAVQCYNqJd-Me8xw3l0QFIMZ3P7hVJQg.VLMHZCS8DaWSL25XB5NPGuvFW79dHz-UWhye7oycXzEg.PNG/open-book_(1).png?type=w966",
        road: pe2Road,
        facilities: [
          {desc: "• 경사로"},
          {desc: "• 출입문은 미닫이문과 자동문으로 되어있어요."},
          {desc: "• 건물에 엘리베이터가 1층에 있어요.(당연히1층에있겠짐)"},
          {desc: "• 장애인 전용 화장실이 1,2층에 있어요."},
          {desc: "• 장애인 전용 주차장이__개 있어요."},
          {desc: "• 주요 동선 내 계단이 있어 휠체어 이용자가 접근하기 어려워요."}
        ]
      },


      {
        name: "우정원",
        coords: [37.24598374799652, 127.07702809477692],
        desc: "긱사",
        img: "https://postfiles.pstatic.net/MjAyNTExMTRfMjk0/MDAxNzYzMTA4NDg4MDg4.-_Op3Yfkk7wOPAVQCYNqJd-Me8xw3l0QFIMZ3P7hVJQg.VLMHZCS8DaWSL25XB5NPGuvFW79dHz-UWhye7oycXzEg.PNG/open-book_(1).png?type=w966",
        road: secondRoad,
        facilities: [
          {desc: "• 경사로가 건물 양쪽에 있어요."},
          {desc: "• 출입문은 여닫이문으로 되어있어요."},
          {desc: "• 건물 안쪽에 엘리베이터가 있어요."},
          {desc: "• 장애인 전용 화장실이 1층에 있어요."},
          {desc: "• 장애인 전용 주차장이 3개 있어요."},
          {desc: "• 건물까지 가는 길이 급경사에요. <br>• 경사에서 도움을 받을 수 있는 호출 버튼이 있어요."}
        ]
      },

      {
        name: "제2기숙사 A동",
        coords: [37.24367727218569, 127.07672144260087],
        desc: "긱사",
        img: "https://postfiles.pstatic.net/MjAyNTExMTRfMjk0/MDAxNzYzMTA4NDg4MDg4.-_Op3Yfkk7wOPAVQCYNqJd-Me8xw3l0QFIMZ3P7hVJQg.VLMHZCS8DaWSL25XB5NPGuvFW79dHz-UWhye7oycXzEg.PNG/open-book_(1).png?type=w966",
        road: girlRoad,
        facilities: [
          {desc: "• 경사로가 건물 오른쪽에 있어요."},
          {desc: "• 출입문은 여닫이문으로 되어있어요."},
          {desc: "• 기숙사생만 이용할 수 있어요."},
          {desc: "• 장애인 전용 화장실이 들어가서 왼쪽에 있어요."},
          {desc: "• 장애인 전용 주차장이 없어요."},
          {desc: "세부 정보를 입력하세요 ㅋㅋ"}
        ]
      },


      {
        name: "제2기숙사 B동",
        coords: [37.242694833365654, 127.07718253318049],
        desc: "긱사",
        img: "https://postfiles.pstatic.net/MjAyNTExMTRfMjk0/MDAxNzYzMTA4NDg4MDg4.-_Op3Yfkk7wOPAVQCYNqJd-Me8xw3l0QFIMZ3P7hVJQg.VLMHZCS8DaWSL25XB5NPGuvFW79dHz-UWhye7oycXzEg.PNG/open-book_(1).png?type=w966",
        road: boyRoad,
        facilities: [
          {desc: "• 경사로가 건물 왼쪽에 있어요."},
          {desc: "• 출입문이 여닫이문과 자동문으로 되어있어요."},
          {desc: "• 기숙사생만 이용할 수 있어요."},
          {desc: "• 기숙사생만 이용할 수 있어요."},
          {desc: "• 장애인 전용 주차장이 없어요."},
          {desc: "세부 정보를 입력하세요 ㅋㅋ"}
        ]
      },

     {
        name: "학생회관",
        coords: [37.24205319318819, 127.0800417187643],
        desc: "학생회관",
        img: "https://postfiles.pstatic.net/MjAyNTExMTRfMjk0/MDAxNzYzMTA4NDg4MDg4.-_Op3Yfkk7wOPAVQCYNqJd-Me8xw3l0QFIMZ3P7hVJQg.VLMHZCS8DaWSL25XB5NPGuvFW79dHz-UWhye7oycXzEg.PNG/open-book_(1).png?type=w966",
        road: stuRoad,
        facilities: [
          {desc: "• 경사로가 건물 왼쪽에 있어요."},
          {desc: "• 출입문이 미닫이문과 자동물으로 되어있어요. <br>• 문 열림 보조 손잡이가 있어요."},
          {desc: "• 엘리베이터가 건물 안쪽에 있어요."},
          {desc: "• 장애인 전용 화장실이 1층에 있어요.(확인필요)"},
          {desc: "• 장애인 전용 주차장이 있어요."},
          {desc: "세부 정보를 입력하세요 ㅋㅋ"}
        ]
      },
     {
        name: "멀티미디어 교육관",
        coords: [37.24417283383876, 127.0767416685287],
        desc: "멀티미디어 교육관",
        img: "https://postfiles.pstatic.net/MjAyNTExMTRfMjk0/MDAxNzYzMTA4NDg4MDg4.-_Op3Yfkk7wOPAVQCYNqJd-Me8xw3l0QFIMZ3P7hVJQg.VLMHZCS8DaWSL25XB5NPGuvFW79dHz-UWhye7oycXzEg.PNG/open-book_(1).png?type=w966",
        road: mulRoad,
        facilities: [
          {desc: "• 경사로가 건물 오른쪽에 있어요."},
          {desc: "• 출입문은 여닫이문과 자동문으로 되어있어요."},
          {desc: "• 엘리베이터가 건물 중앙에 2개 있어요."},
          {desc: "• 장애인 전용 화장실이 1,3,5,7층에 있어요.(확인필요)"},
          {desc: "• 장애인 전용 주차장이 있어요."},
          {desc: "• 자동문이 있는 주 출입구에는 경사로가 없고, 경사로가 있는 출입문은 여닫이문이에요."}
        ]
      },

     {
        name: "도예관",
        coords: [37.24361569767292, 127.08122959520163 ],
        desc: "도예관",
        img: "https://postfiles.pstatic.net/MjAyNTExMTRfMjk0/MDAxNzYzMTA4NDg4MDg4.-_Op3Yfkk7wOPAVQCYNqJd-Me8xw3l0QFIMZ3P7hVJQg.VLMHZCS8DaWSL25XB5NPGuvFW79dHz-UWhye7oycXzEg.PNG/open-book_(1).png?type=w966",
        road: doRoad,
        facilities: [
          {desc: "• 경사로__에 있어요."},
          {desc: "• 출입문은 미닫이문으로 되어있어요."},
          {desc: "• 엘리베이터가 건물에 없어요."},
          {desc: "• 장애인 전용 화장실이 없어요."},
          {desc: "• 장애인 전용 주차장이 없어요."},
          {desc: "• 도예과 학생이 아니면 출입 불가 해요."}
        ]
      },








    ];

    let currentRoad = null;   // 현재 활성화된 길을 기억(새 길 클릭 시 기존 길 제거)

    

    locations.forEach((loc,i) => {
  const popup1 = `
    <div class="popup-wrapper">
      ${loc.img ? `<img src="${loc.img}" alt="${loc.name}" class="popup-img">` : ""}
      <b class="popup-title">${loc.name}</b><br>
      <span class="popup-desc">${loc.desc}</span><br>
      <a href="${loc.link}" target="_blank" class="popup-link">홈페이지 이동</a><br>

      <button class="popup-btn" id="openPopup${i}">다른 팝업 보기</button>
      
    </div>
  `;

  const popup2 = `
        <div class="popup-container">
          <div class="popup-card">
            <img src="https://postfiles.pstatic.net/MjAyNTExMTRfNCAg/MDAxNzYzMTA5ODI0NjQw.FV2fnucHXf1YYNXNoyPRzAasUq8-EFBS4vBTaY9u9Zkg.--F1Eob5TPYn3XlVovs6I8eFiCS87HdngGIYDZIWyOcg.PNG/ramp_(1).png?type=w966" alt="경사로">
            <div class="popup-card-content">
            <h4>경사로</h4>
            <p>${loc.facilities[0].desc}</p>
            </div>
          </div>

          <div class="popup-card">
            <img src="https://postfiles.pstatic.net/MjAyNTExMTRfMTEy/MDAxNzYzMTA5ODExNjY3.4aaNS6Caib0ZT7d4OBXXp9Q1LYyxWO152KXWoO4m-7og.HQpbu6wmLwGj25VFG85SzadncDHUCKz06my5AuJ_zGYg.PNG/open-exit-door.png?type=w966" alt="출입문">
            <div class="popup-card-content">
            <h4>출입문</h4>
            <p>${loc.facilities[1].desc}</p>
            </div>
          </div>

          <div class="popup-card">
            <img src="https://postfiles.pstatic.net/MjAyNTExMTFfNzgg/MDAxNzYyODYxMjc2NTEz.9GZPqo0QpzyBn4mLpuRVsF7tPcq7qv2uz6N68YHQujgg.M1VYAvnlfV62YSOzxg3WgzUD0KvqTkgn-wGTkDLhcb4g.PNG/lift-sign.png?type=w966" alt="엘리베이터">
            <div class="popup-card-content">
            <h4>엘리베이터</h4>
            <p>${loc.facilities[2].desc}</p>
            </div>
          </div>

            <div class="popup-card">
            <img src="https://postfiles.pstatic.net/MjAyNTExMTFfMjA5/MDAxNzYyODYxODUzNjA0.k3_3gdydilC_1xt8V5qncEtBgORwiUeZKvdLSP9sjvwg.DBW1P5zXbzTDcK0so0cdJjJLKKRf4sTa7Nlu4Ll5Tngg.PNG/toilet.png?type=w966" alt="화장실">
            <div class="popup-card-content">
            <h4>화장실</h4>
            <p>${loc.facilities[3].desc}</p>
            </div>
          </div>

            <div class="popup-card">
            <img src="https://postfiles.pstatic.net/MjAyNTExMTRfMjg3/MDAxNzYzMTA5ODQ2ODMw.aIJnLnEolwj8BH_W-WXHT6VuhtTv9pp93DH4MXItDlkg.duUr17jmijBdsIanzUHbaR4_FdE1DitPeDaJmbT0RkAg.PNG/parking.png?type=w966" alt="주차장">
            <div class="popup-card-content">
            <h4>주차장</h4>
            <p>${loc.facilities[4].desc}</p>
            </div>
          </div>

          <div class="popup-card">
            <img src="https://postfiles.pstatic.net/MjAyNTExMTRfMjE0/MDAxNzYzMTA5ODY1MDQz.hHU1_D_DL1JynbQYY2RHYtMOrN0XHu8t-Ijn4tlc1tMg.4SC7p5DmM0E3_Kp3qW75nH812BkhZPJJHJ_2vfeO28kg.PNG/warning.png?type=w966" alt="특이사항">
            <div class="popup-card-content">
            <h4>특이 사항</h4>
            <p>${loc.facilities[5].desc}</p>
            </div>
          </div>


        </div>

      `;

  /* 보이는 마커 (기본 팝업) */
  const marker = L.marker(loc.coords)
    .addTo(map)
    .bindPopup(popup1, { maxWidth: 300, offset: L.point(0, 0) });

    /* 투명 마커 (두 번째 팝업) */
      const hiddenMarker = L.marker(
        [loc.coords[0], loc.coords[1] + 0.0006],
        { icon: transparentIcon }
      ).addTo(map)
       .bindPopup(popup2, { maxWidth: 300 });  //팝업의 크기는 여기서 조정하면 됨 (이거 찾는 데 2시간 걸림...)

       /* ===================================================
         C) 처음 마커 클릭 시 길(road) 표시
      =================================================== */
      marker.on("click", () => {

        // 기존 길 제거
        if (currentRoad) map.removeLayer(currentRoad);

        // 새 길 추가
        if (loc.road) {
          loc.road.addTo(map);
          currentRoad = loc.road;
        }
      });

      /* 버튼 -> 두 번째 팝업 열기 */
      map.on("popupopen", () => {
        const btn = document.getElementById(`openPopup${i}`);
        if (btn) btn.addEventListener("click", () => hiddenMarker.openPopup());
      });
});
  </script>
</body>
